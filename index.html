<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Enhanced GitHub Whiteboard</title>
    <style>
        /* Basic CSS for layout and styling */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            height: 100vh; /* Full viewport height */
            overflow: hidden; /* Prevent body scroll */
            display: flex; /* Use flexbox for main layout */
            background-color: #f8f8f8;
            color: #333;
        }

        .sidebar {
            width: 250px;
            background-color: #2c3e50; /* Darker blue-grey */
            color: #ecf0f1; /* Light text */
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            border-right: 1px solid #1abc9c; /* Accent color */
            flex-shrink: 0; /* Don't allow sidebar to shrink */
        }

        .sidebar h2 {
            margin-top: 0;
            font-size: 1.5em;
            color: #1abc9c; /* Accent color */
            border-bottom: 1px solid #34495e;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .tool-group {
            border-bottom: 1px solid #34495e;
            padding-bottom: 15px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px; /* Space between buttons in a group */
        }

        .tool-group:last-of-type {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .tool-group h3 {
            font-size: 1.1em;
            color: #ecf0f1;
            margin-top: 0;
            margin-bottom: 5px; /* Adjust spacing */
        }

        .sidebar button {
            background-color: #1abc9c; /* Accent color */
            color: white;
            border: none;
            padding: 10px 15px;
            text-align: left; /* Align text to the left */
            font-size: 1em;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%; /* Make buttons full width in sidebar */
            box-sizing: border-box; /* Include padding/border in width */
        }

        .sidebar button:hover {
            background-color: #16a085; /* Darker accent on hover */
            transform: translateY(-1px);
        }

        .sidebar button:active {
            transform: translateY(0);
        }

        .sidebar button.clear-btn {
            background-color: #e74c3c; /* Red for clear action */
            margin-top: 20px;
        }

        .sidebar button.clear-btn:hover {
            background-color: #c0392b;
        }

        .main-content {
            flex-grow: 1; /* Takes up remaining space */
            padding: 20px;
            background-color: #ecf0f1; /* Light grey */
            display: flex;
            flex-direction: column;
        }

        #whiteboard {
            flex-grow: 1; /* Takes up remaining space */
            border: 1px solid #bdc3c7; /* Light border */
            padding: 15px;
            overflow-y: auto; /* Enable vertical scrolling */
            line-height: 1.6;
            font-size: 1.1em; /* Default font size for the whiteboard area */
            background-color: white;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            outline: none; /* Remove default focus outline */
            min-height: 200px; /* Ensure it has a minimum height */
            border-radius: 5px;
        }

        /* Basic icons (optional, could use FontAwesome or SVG for real icons) */
        .icon {
            font-size: 1.2em;
            width: 1.2em; /* Ensure consistent width */
            text-align: center;
            display: inline-block; /* For better control of text/icon alignment */
        }

        /* Styling for highlighting - execCommand('backColor') applies inline style directly,
           so this class is mostly for illustrative purpose or if you manually apply it. */
        .highlighted-text {
            background-color: #f1c40f; /* Yellow */
            padding: 1px 3px;
            border-radius: 3px;
        }

        /* Styling for deleted text using the <s> (strikethrough) tag */
        .deleted-text {
            text-decoration: line-through;
            opacity: 0.6;
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>Whiteboard Tools</h2>
        <div class="tool-group">
            <h3>Text Formatting</h3>
            <button id="boldBtn"><span class="icon"><strong>B</strong></span> Bold</button>
            <button id="italicBtn"><span class="icon"><i>I</i></span> Italic</button>
            <button id="underlineBtn"><span class="icon"><u>U</u></span> Underline</button>
            <button id="highlightBtn"><span class="icon" style="background-color: yellow; padding: 0 4px; border-radius: 3px;">H</span> Highlight</button>
            <button id="strikethroughBtn"><span class="icon"><s>S</s></span> Strikethrough</button>
        </div>

        <div class="tool-group">
            <h3>Font Size</h3>
            <!-- execCommand('fontSize') uses values 1-7 which map to HTML font sizes (e.g., <font size="3">) -->
            <!-- This is a deprecated method, but functional for simple contenteditable cases. -->
            <button id="fontSizeNormalBtn"><span class="icon" style="font-size: 0.8em;">Aa</span> Normal</button>
            <button id="fontSizeLargeBtn"><span class="icon" style="font-size: 1.1em;">Aa</span> Large</button>
            <button id="fontSizeHugeBtn"><span class="icon" style="font-size: 1.4em;">Aa</span> Huge</button>
        </div>

        <button id="clearBtn" class="clear-btn"><span class="icon">üóëÔ∏è</span> Clear Whiteboard</button>

        <p style="font-size: 0.9em; line-height: 1.4; color: #b0bec5; margin-top: auto;">
            Type directly into the right pane. Select text and click a tool on the left or use keyboard shortcuts. Your work saves automatically!
            <br><br>
            <b>Keyboard Shortcuts:</b><br>
            Ctrl/Cmd + B: Bold<br>
            Ctrl/Cmd + I: Italic<br>
            Ctrl/Cmd + U: Underline<br>
            Ctrl/Cmd + H: Highlight<br>
            Ctrl/Cmd + D: Strikethrough
        </p>
    </div>

    <div class="main-content">
        <div id="whiteboard" contenteditable="true">
            <p>Welcome to your personal whiteboard!</p>
            <p>You can <b>type</b> directly here, <i>paste</i> text from other sources, and apply formatting using the tools on the left.</p>
            <p>Try selecting some text and clicking the <b>Bold</b>, <span style="background-color: yellow;">Highlight</span>, or <s>Strikethrough</s> buttons.</p>
            <p>You can also use <span style="font-size: x-large;">different font sizes</span> now!</p>
            <p>All your content will be automatically saved in your browser, even if you close this tab!</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const whiteboard = document.getElementById('whiteboard');
            const boldBtn = document.getElementById('boldBtn');
            const italicBtn = document.getElementById('italicBtn');
            const underlineBtn = document.getElementById('underlineBtn');
            const highlightBtn = document.getElementById('highlightBtn');
            const strikethroughBtn = document.getElementById('strikethroughBtn');
            const fontSizeNormalBtn = document.getElementById('fontSizeNormalBtn');
            const fontSizeLargeBtn = document.getElementById('fontSizeLargeBtn');
            const fontSizeHugeBtn = document.getElementById('fontSizeHugeBtn');
            const clearBtn = document.getElementById('clearBtn');

            // --- Persistence (Load/Save) ---
            const saveContent = () => {
                localStorage.setItem('whiteboardContent', whiteboard.innerHTML);
            };

            const loadContent = () => {
                const savedContent = localStorage.getItem('whiteboardContent');
                if (savedContent) {
                    whiteboard.innerHTML = savedContent;
                } else {
                    // Initial content if nothing saved
                    whiteboard.innerHTML = `<p>Welcome to your personal whiteboard!</p>
                                            <p>You can <b>type</b> directly here, <i>paste</i> text from other sources, and apply formatting using the tools on the left.</p>
                                            <p>Try selecting some text and clicking the <b>Bold</b>, <span style="background-color: yellow;">Highlight</span>, or <s>Strikethrough</s> buttons.</p>
                                            <p>You can also use <span style="font-size: x-large;">different font sizes</span> now!</p>
                                            <p>All your content will be automatically saved in your browser, even if you close this tab!</p>`;
                }
            };

            // Load content when the page loads
            loadContent();

            // Save content whenever the whiteboard content changes (input event fires on text/content changes)
            whiteboard.addEventListener('input', saveContent);

            // --- Formatting Functions ---
            // document.execCommand is a simple way to apply rich text editing commands.
            // Note: It's deprecated but still widely supported for basic cases like this.
            // For more robust editors, you'd typically use the Selection and Range APIs directly.

            const applyCommand = (command, value = null) => {
                document.execCommand(command, false, value);
                whiteboard.focus(); // Keep focus on the whiteboard after applying command
            };

            boldBtn.addEventListener('click', () => applyCommand('bold'));
            italicBtn.addEventListener('click', () => applyCommand('italic'));
            underlineBtn.addEventListener('click', () => applyCommand('underline'));
            highlightBtn.addEventListener('click', () => applyCommand('backColor', 'yellow')); // 'backColor' changes background
            strikethroughBtn.addEventListener('click', () => applyCommand('strikeThrough'));

            // Font Size - using values 1-7 (e.g., 3=normal, 5=large, 7=huge)
            // This applies <font size="X"> tags, which are deprecated.
            fontSizeNormalBtn.addEventListener('click', () => applyCommand('fontSize', '3')); // Corresponds to <font size="3"> (small/medium)
            fontSizeLargeBtn.addEventListener('click', () => applyCommand('fontSize', '5')); // Corresponds to <font size="5"> (large)
            fontSizeHugeBtn.addEventListener('click', () => applyCommand('fontSize', '7')); // Corresponds to <font size="7"> (xx-large)


            clearBtn.addEventListener('click', () => {
                if (confirm('Are you sure you want to clear the whiteboard? This action cannot be undone.')) {
                    whiteboard.innerHTML = ''; // Clear the content
                    localStorage.removeItem('whiteboardContent'); // Clear from local storage
                    whiteboard.focus();
                }
            });

            // --- Keyboard Shortcuts ---
            document.addEventListener('keydown', (event) => {
                // Only trigger shortcuts if the whiteboard or its children are currently focused
                if (whiteboard.contains(document.activeElement)) {
                    const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
                    const isCtrlOrCmd = isMac ? event.metaKey : event.ctrlKey; // Use MetaKey for Mac (Cmd), CtrlKey for others

                    if (isCtrlOrCmd) {
                        switch (event.key.toLowerCase()) {
                            case 'b':
                                applyCommand('bold');
                                event.preventDefault(); // Prevent browser default (e.g., opening bookmarks with Ctrl+B)
                                break;
                            case 'i':
                                applyCommand('italic');
                                event.preventDefault();
                                break;
                            case 'u':
                                applyCommand('underline');
                                event.preventDefault();
                                break;
                            case 'h':
                                applyCommand('backColor', 'yellow');
                                event.preventDefault();
                                break;
                            case 'd': // 'd' for delete/strikethrough
                                applyCommand('strikeThrough');
                                event.preventDefault();
                                break;
                            // Add more shortcuts here if needed
                        }
                    }
                }
            });

            // Optional: Ensure focus on whiteboard when page loads
            whiteboard.focus();
        });
    </script>

</body>
</html>
